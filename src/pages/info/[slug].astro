---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import { slide } from "astro:transitions";

export async function getStaticPaths() {
  // Obtiene todos los posts de la colección "info"
  const posts = await getCollection("info");

  // Genera un array con los slugs de los posts
  const paths = posts.map((post) => ({
    params: { slug: post.slug },
  }));

  return paths;
}

const { slug } = Astro.params;

console.log(Astro.params);

// Obtiene todos los posts de la colección "info"
const posts = await getCollection("info");

// Filtra el post que coincida con el slug
const post = posts.find((post) => post.slug === slug);

if (!post) {
  throw new Error(`Post no encontrado: ${slug}`);
}

const { data, body } = post;
---

<Layout title={data.title} description={data.description}>
  <article class="m-5" transition:animate={slide({ duration: "0.4s" })}>
    <h1 class="text-4xl text-red-500 text-center">{data.title}</h1>
    <p class="p-3 text-center"><strong>Fecha:</strong> {data.date.toDateString()}</p>
    <p class="prose text-blue-800 p-5 text-md-center font-bold">
      {data.description}
    </p>
    <div class="prose text-justify p-4">{body}</div>
  </article>
</Layout>
